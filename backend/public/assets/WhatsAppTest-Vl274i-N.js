import{d as R,r as d,i as b,o as Q,G as U,c as i,a as e,f as y,n as w,t,k as o,j as q,z as A,e as h,h as u}from"./index-D6DdudHB.js";const D={class:"px-4 py-6 sm:px-0 space-y-6"},E={class:"grid gap-6 lg:grid-cols-2"},V={class:"bg-white shadow rounded-lg p-6 space-y-4"},j={class:"flex items-center justify-between"},T={class:"grid grid-cols-1 gap-y-2 text-sm text-gray-700"},B={class:"flex gap-2"},I=["disabled"],J={class:"flex items-center gap-2 text-sm text-gray-600"},L={key:0,class:"text-sm text-red-600"},M={class:"bg-white shadow rounded-lg p-6 space-y-4"},O={class:"flex items-center justify-between"},W={key:0,class:"border border-gray-200 rounded-lg p-4 flex justify-center"},z=["src"],P={key:1,class:"text-sm text-gray-500"},G={class:"grid grid-cols-1 gap-y-2 text-sm text-gray-700"},H={key:2,class:"text-sm text-red-600"},Y={class:"bg-white shadow rounded-lg p-6"},F={class:"grid gap-4 lg:grid-cols-2"},K={class:"bg-gray-900 text-green-100 text-xs rounded-lg p-4 overflow-auto max-h-64"},X={class:"bg-gray-900 text-green-100 text-xs rounded-lg p-4 overflow-auto max-h-64"},ee=R({__name:"WhatsAppTest",setup(Z){const n=d({success:!1,status:"unknown",connected:!1}),l=d({success:!1}),c=d(!1),g=d(""),p=d(""),x=d(!0),m=d(null);let v=null;const _=b(()=>JSON.stringify(n.value,null,2)),k=b(()=>JSON.stringify(l.value,null,2)),C=b(()=>m.value?new Date(m.value).toLocaleTimeString():"Never");async function S(){var r,s;try{const a=await h.get("/api/whatsapp/status");n.value=a.data,g.value=""}catch(a){g.value=((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.error)||a.message}}async function N(){var r,s;try{const a=await h.get("/api/whatsapp/qr");l.value=a.data,p.value=""}catch(a){p.value=((s=(r=a.response)==null?void 0:r.data)==null?void 0:s.error)||a.message}}async function f(){c.value=!0,await Promise.all([S(),N()]),m.value=Date.now(),c.value=!1}return Q(async()=>{await f(),v=window.setInterval(()=>{x.value&&f()},3e3)}),U(()=>{v&&(clearInterval(v),v=null)}),(r,s)=>(u(),i("div",D,[s[14]||(s[14]=e("div",null,[e("h2",{class:"text-3xl font-bold text-gray-900"},"WhatsApp Connection Test"),e("p",{class:"mt-1 text-sm text-gray-500"}," Use this page to inspect raw WhatsApp connection data returned by the backend. Values refresh every 3 seconds. ")],-1)),e("div",E,[e("div",V,[e("div",j,[s[1]||(s[1]=e("h3",{class:"text-lg font-medium text-gray-900"},"Status",-1)),e("span",{class:w(["px-3 py-1 rounded-full text-xs font-semibold",n.value.connected?"bg-green-100 text-green-700":"bg-red-100 text-red-700"])},t(n.value.connected?"Connected":"Disconnected"),3)]),e("dl",T,[e("div",null,[s[2]||(s[2]=e("span",{class:"font-semibold"},"Status:",-1)),o(" "+t(n.value.status),1)]),e("div",null,[s[3]||(s[3]=e("span",{class:"font-semibold"},"Connected:",-1)),o(" "+t(n.value.connected),1)]),e("div",null,[s[4]||(s[4]=e("span",{class:"font-semibold"},"Client Exists:",-1)),o(" "+t(n.value.clientExists),1)]),e("div",null,[s[5]||(s[5]=e("span",{class:"font-semibold"},"Last Updated:",-1)),o(" "+t(C.value),1)])]),e("div",B,[e("button",{onClick:f,disabled:c.value,class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer text-sm"},t(c.value?"Refreshing…":"Refresh Now"),9,I),e("label",J,[q(e("input",{type:"checkbox","onUpdate:modelValue":s[0]||(s[0]=a=>x.value=a),class:"rounded border-gray-300"},null,512),[[A,x.value]]),s[6]||(s[6]=o(" Auto refresh ",-1))])]),g.value?(u(),i("div",L,t(g.value),1)):y("",!0)]),e("div",M,[e("div",O,[s[7]||(s[7]=e("h3",{class:"text-lg font-medium text-gray-900"},"QR Code Response",-1)),e("span",{class:w(["px-3 py-1 rounded-full text-xs font-semibold",l.value.success?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"])},t(l.value.success?"Available":"Pending"),3)]),l.value.image?(u(),i("div",W,[e("img",{src:l.value.image,alt:"QR Code",class:"max-w-xs"},null,8,z)])):(u(),i("div",P," No QR image returned. ")),e("dl",G,[e("div",null,[s[8]||(s[8]=e("span",{class:"font-semibold"},"Success:",-1)),o(" "+t(l.value.success),1)]),e("div",null,[s[9]||(s[9]=e("span",{class:"font-semibold"},"Message:",-1)),o(" "+t(l.value.message||"—"),1)]),e("div",null,[s[10]||(s[10]=e("span",{class:"font-semibold"},"Has QR String:",-1)),o(" "+t(l.value.qr?"Yes":"No"),1)])]),p.value?(u(),i("div",H,t(p.value),1)):y("",!0)])]),e("div",Y,[s[13]||(s[13]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Raw JSON",-1)),e("div",F,[e("div",null,[s[11]||(s[11]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-1"},"/api/whatsapp/status",-1)),e("pre",K,t(_.value),1)]),e("div",null,[s[12]||(s[12]=e("h4",{class:"text-sm font-semibold text-gray-700 mb-1"},"/api/whatsapp/qr",-1)),e("pre",X,t(k.value),1)])])])]))}});export{ee as default};
