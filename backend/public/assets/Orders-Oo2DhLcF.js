import{d as Ce,i as _,r as c,o as _e,c as r,a as l,f as x,q as Se,F as v,b as p,j as m,l as y,t as n,k as I,v as K,s as T,m as le,e as he,x as Oe,y as Ne,n as oe,z as Ue,h as s}from"./index-D6DdudHB.js";import{u as Ve}from"./orders-JAxfKHU9.js";import{_ as De}from"./FileUpload.vue_vue_type_script_setup_true_lang-BaW8ujYT.js";import{u as $,w as Ee}from"./xlsx-DrgRuPKf.js";const $e={class:"px-4 py-6 sm:px-0"},Fe={class:"mb-6 flex justify-between items-center"},Ae={class:"flex gap-2"},Me={key:0,class:"bg-white shadow rounded-lg p-6 mb-6"},je={key:0,class:"space-y-4"},Re={key:1,class:"space-y-4"},Pe={class:"space-y-2"},Te=["value"],Le={key:0,class:"mt-4"},qe=["value"],Be={key:0,class:"mt-4"},Je={class:"flex flex-wrap gap-2"},He={key:1,class:"flex justify-end gap-2 mt-4"},Ie=["disabled"],Ke={key:2,class:"space-y-4"},ze={class:"grid grid-cols-1 md:grid-cols-3 gap-4"},We=["value"],Ye=["value"],Ge={class:"flex items-end"},Qe={class:"bg-gray-50 p-3 rounded-md"},Xe={class:"text-sm text-gray-700"},Ze={class:"font-medium"},et={class:"font-medium"},tt={key:0,class:"text-gray-500"},lt={class:"max-h-96 overflow-auto border border-gray-200 rounded-md"},ot={class:"min-w-full text-sm"},rt={class:"bg-gray-50 sticky top-0"},st={class:"px-3 py-2 text-left border-b"},at=["checked"],nt={class:"px-3 py-2 border-b"},ut=["onUpdate:modelValue"],dt={class:"flex justify-end gap-2"},it=["disabled"],mt={key:3,class:"space-y-4"},vt={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},pt=["value"],ct=["value"],yt=["value"],bt=["value"],gt=["value"],ft=["value"],xt=["value"],kt=["value"],wt=["value"],Ct=["value"],_t={class:"flex justify-end gap-2 mt-4"},St=["disabled"],ht={key:4,class:"space-y-4"},Ot={class:"bg-gray-50 p-3 rounded-md"},Nt={class:"text-sm text-gray-700"},Ut={class:"font-medium"},Vt={class:"flex justify-end gap-2"},Dt=["disabled"],Et={key:1,class:"text-center py-8 text-gray-500"},$t={key:2,class:"text-center py-12 bg-white rounded-lg shadow"},Ft={key:3,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4"},At=["onClick"],Mt={class:"flex justify-between items-start mb-4"},jt={class:"text-xl font-semibold text-gray-900"},Rt={class:"space-y-2 text-sm text-gray-600"},Pt={key:0,class:"flex items-start"},Tt={class:"flex items-center justify-between pt-2 border-t"},Lt={class:"mt-4 flex gap-2"},qt=["onClick"],Bt=["onClick"],Jt=["onClick"],Ht={class:"relative top-20 mx-auto p-6 border w-full max-w-2xl shadow-lg rounded-md bg-white"},It={class:"flex justify-between items-center mb-4"},Kt={class:"grid grid-cols-2 gap-4"},zt={class:"flex justify-end gap-2 pt-4"},Wt=["disabled"],el=Ce({__name:"Orders",setup(Yt){const W=Oe(),C=Ve(),Y=_(()=>C.orders),re=_(()=>C.loading),U=c(!1),L=c(!1),f=c({name:"",delivery_month:null,delivery_year:null,status:"draft",notes:null}),q=c(!1),b=c(1),R=c(null),B=c([]),k=c(null),S=c(null),V=c(1),d=c([]),h=c([]),J=c(!1),D=c(""),P=c(""),a=c({name:"",address:"",city:"",state:"",contact_name:"",contact_phone:"",contact_email:"",kits_count:"",city_type:"",protocol_number:""}),F=c({name:""}),H=c(!1);function se(o,e){return!o&&!e?"":o&&e?`${o} ${e}`:o||(e?e.toString():"")}function G(o){W.push(`/orders/${o}`)}async function ae(){var o;if(!((o=f.value.name)!=null&&o.trim())){alert("Order name is required");return}L.value=!0;try{await C.createOrder(f.value),U.value=!1,f.value={name:"",delivery_month:null,delivery_year:null,status:"draft",notes:null}}catch(e){alert("Error creating order: "+(e.message||e))}finally{L.value=!1}}async function ne(o){if(confirm(`Are you sure you want to delete "${o.name}"? This will also delete all schools and structures in this order.`))try{await C.deleteOrder(o.id)}catch(e){alert("Error deleting order: "+(e.message||e))}}async function ue(o){try{const e=await C.exportOrder(o,"xlsx"),t=$.book_new(),u=[["Order Name",e.order.name],["Delivery Month",e.order.delivery_month||""],["Delivery Year",e.order.delivery_year||""],["Status",e.order.status],["Notes",e.order.notes||""]],i=$.aoa_to_sheet(u);$.book_append_sheet(t,i,"Order");const E=e.schools.map(g=>({"School Name":g.name,Address:g.address,City:g.city,"Contact Name":g.contact_name||"","Contact Phone":g.contact_phone||"","Contact Email":g.contact_email||"","Kits Count":g.kits_count||0,"City Type":g.city_type||"","Delivery Group":g.delivery_group_name||"","Calculated Kits":g.calculated_kits||0,Structures:(g.structures||[]).map(j=>`${j.name} (${j.kits_count})`).join(", ")})),M=$.json_to_sheet(E);$.book_append_sheet(t,M,"Schools");const O=[];e.schools.forEach(g=>{(g.structures||[]).forEach(j=>{O.push({"School Name":g.name,"Structure Name":j.name,Address:j.address||"","Kits Count":j.kits_count||0})})});const N=$.json_to_sheet(O);$.book_append_sheet(t,N,"Structures"),Ee(t,`Order_${e.order.name.replace(/\s+/g,"_")}.xlsx`)}catch(e){alert("Error exporting order: "+(e.message||e))}}const de=_(()=>{if(!S.value)return[1];const o=Math.min(10,S.value.totalRows);return Array.from({length:o},(e,t)=>t+1)}),z=()=>a.value.state||d.value.find(o=>["state","region","regiune","judet","județ"].some(e=>o.toLowerCase().includes(e)))||"",Q=()=>a.value.city||d.value.find(o=>["city","oraș","oras","municipiu"].some(e=>o.toLowerCase().includes(e)))||"",ie=_(()=>{const o=new Set,e=z();return e?(h.value.forEach(t=>{const u=t.data[e];u&&o.add(String(u))}),Array.from(o).sort()):[]}),me=_(()=>{const o=new Set,e=Q(),t=z();return e?(h.value.forEach(u=>{if(D.value&&t){const E=u.data[t];if(String(E)!==D.value)return}const i=u.data[e];i&&o.add(String(i))}),Array.from(o).sort()):[]}),w=_(()=>{const o=z(),e=Q();return h.value.filter(t=>{if(D.value&&o){const u=t.data[o];if(String(u)!==D.value)return!1}if(P.value&&e){const u=t.data[e];if(String(u)!==P.value)return!1}return!0})}),A=_(()=>w.value.filter(o=>o.selected).length),ve=_(()=>w.value.length>0&&w.value.every(o=>o.selected)),X=_(()=>!!(a.value.name&&a.value.address&&a.value.city));function Z(){q.value=!1,b.value=1,R.value=null,B.value=[],k.value=null,S.value=null,V.value=1,d.value=[],h.value=[],D.value="",P.value="",a.value={name:"",address:"",city:"",state:"",contact_name:"",contact_phone:"",contact_email:"",kits_count:"",city_type:"",protocol_number:""},F.value={name:""}}async function pe(o){R.value=o.fileId,B.value=o.sheets,k.value=null,S.value=null,V.value=1,d.value=[],b.value=2}function ce(){k.value&&(S.value=B.value.find(o=>o.name===k.value)||null,V.value=1,ee())}function ee(){if(!S.value)return;const o=S.value.preview.find(e=>e.rowNumber===V.value);o&&(d.value=o.cells)}async function ye(){var o,e;if(!(!R.value||!k.value)){J.value=!0;try{const t=await he.post("/api/upload/parse",{fileId:R.value,sheetName:k.value,headerRow:V.value});h.value=t.data.rows.map(u=>({data:u.data,selected:!1})),be(),b.value=3}catch(t){alert("Error loading sheet data: "+(((e=(o=t.response)==null?void 0:o.data)==null?void 0:e.error)||t.message))}finally{J.value=!1}}}function be(){const o=d.value.map(t=>t.toLowerCase()),e=t=>{for(const u of t){const i=o.findIndex(E=>E.includes(u));if(i!==-1)return d.value[i]}return""};a.value={name:e(["school","nume","name"]),address:e(["address","adresa","adresă"]),city:e(["city","oraș","oras","municipiu"]),state:e(["state","region","regiune","judet","județ"]),contact_name:e(["contact","person","persoană","cp name"]),contact_phone:e(["phone","telefon","tel","cp number","number"]),contact_email:e(["email","e-mail","cp email"]),kits_count:e(["kits","kit","final number","number of kits","kids"]),city_type:e(["medium","type","tip","urban","rural"]),protocol_number:e(["protocol","contract"])}}function te(){}function ge(){w.value.forEach(o=>{o.selected=!0})}function fe(o){const e=o.target.checked;w.value.forEach(t=>{t.selected=e})}function xe(){if(A.value===0){alert("Please select at least one row");return}b.value=4}function ke(){if(!X.value){alert("Please map at least School Name, Address, and City columns");return}b.value=5}async function we(){var o;if(!((o=F.value.name)!=null&&o.trim())){alert("Order name is required");return}if(A.value===0){alert("Please select at least one school");return}H.value=!0;try{const e=await C.createOrder({name:F.value.name,status:"draft"}),t=w.value.filter(u=>u.selected);for(const u of t){const i=O=>O&&u.data[O]||"",E=O=>{if(!O)return null;const N=String(O).toLowerCase().trim();return N.includes("rural")?"rural":N.includes("urban big")||N.includes("urban large")?"urban-large":N.includes("urban small")?"urban-small":N.includes("urban")?"urban":N},M={name:i(a.value.name),city:i(a.value.city),address:i(a.value.address),contact_name:i(a.value.contact_name)||null,contact_phone:i(a.value.contact_phone)||null,contact_email:i(a.value.contact_email)||null,city_type:E(i(a.value.city_type)),protocol_number:i(a.value.protocol_number)||null,kits_count:parseInt(i(a.value.kits_count))||0};M.name&&M.city&&M.address&&await C.createSchool(e.id,M)}Z(),await C.fetchOrders(),W.push(`/orders/${e.id}`)}catch(e){alert("Error creating order: "+(e.message||e))}finally{H.value=!1}}return _e(async()=>{await C.fetchOrders()}),(o,e)=>(s(),r("div",$e,[l("div",Fe,[e[30]||(e[30]=l("div",null,[l("h2",{class:"text-3xl font-bold text-gray-900"},"Orders"),l("p",{class:"mt-1 text-sm text-gray-500"},"Upload Excel files with orders, filter by region, and manage schools")],-1)),l("div",Ae,[q.value?x("",!0):(s(),r("button",{key:0,onClick:e[0]||(e[0]=t=>q.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer"}," Upload Excel Order ")),l("button",{onClick:e[1]||(e[1]=t=>U.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer"}," Create New Order ")])]),q.value?(s(),r("div",Me,[l("div",{class:"flex justify-between items-center mb-4"},[e[31]||(e[31]=l("h3",{class:"text-lg font-medium text-gray-900"},"Upload Excel File with Orders",-1)),l("button",{onClick:Z,class:"text-gray-400 hover:text-gray-600 cursor-pointer"}," ✕ ")]),b.value===1?(s(),r("div",je,[Se(De,{onFileUploaded:pe}),e[32]||(e[32]=l("p",{class:"text-sm text-gray-500"}," Upload an Excel file containing school orders. The file should have columns like: School Name, City, State, Address, etc. ",-1))])):x("",!0),b.value===2&&R.value?(s(),r("div",Re,[l("div",null,[e[33]||(e[33]=l("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Select Sheet",-1)),l("div",Pe,[(s(!0),r(v,null,p(B.value,t=>(s(),r("label",{key:t.name,class:"flex items-center cursor-pointer"},[m(l("input",{type:"radio",value:t.name,"onUpdate:modelValue":e[2]||(e[2]=u=>k.value=u),onChange:ce,class:"mr-2"},null,40,Te),[[Ne,k.value]]),l("span",null,n(t.name)+" ("+n(t.rowCount)+" rows, "+n(t.headers.length)+" columns)",1)]))),128))])]),k.value&&S.value?(s(),r("div",Le,[e[35]||(e[35]=l("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Select Header Row",-1)),m(l("select",{"onUpdate:modelValue":e[3]||(e[3]=t=>V.value=t),onChange:ee,class:"w-full max-w-xs border border-gray-300 rounded-md px-3 py-2"},[(s(!0),r(v,null,p(de.value,t=>(s(),r("option",{key:t,value:t}," Row "+n(t),9,qe))),128))],544),[[y,V.value]]),d.value.length>0?(s(),r("div",Be,[e[34]||(e[34]=l("p",{class:"text-sm font-medium text-gray-700 mb-2"},"Detected Columns:",-1)),l("div",Je,[(s(!0),r(v,null,p(d.value,t=>(s(),r("span",{key:t,class:"px-2 py-1 bg-gray-100 text-gray-700 rounded text-sm"},n(t),1))),128))])])):x("",!0)])):x("",!0),d.value.length>0?(s(),r("div",He,[l("button",{onClick:e[4]||(e[4]=t=>b.value=1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Back "),l("button",{onClick:ye,disabled:!k.value||J.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed"},n(J.value?"Loading...":"Load Data"),9,Ie)])):x("",!0)])):x("",!0),b.value===3&&h.value.length>0?(s(),r("div",Ke,[l("div",ze,[l("div",null,[e[37]||(e[37]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by State",-1)),m(l("select",{"onUpdate:modelValue":e[5]||(e[5]=t=>D.value=t),onChange:te,class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[36]||(e[36]=l("option",{value:""},"All States",-1)),(s(!0),r(v,null,p(ie.value,t=>(s(),r("option",{key:t,value:t},n(t),9,We))),128))],544),[[y,D.value]])]),l("div",null,[e[39]||(e[39]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Filter by City",-1)),m(l("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>P.value=t),onChange:te,class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[38]||(e[38]=l("option",{value:""},"All Cities",-1)),(s(!0),r(v,null,p(me.value,t=>(s(),r("option",{key:t,value:t},n(t),9,Ye))),128))],544),[[y,P.value]])]),l("div",Ge,[l("button",{onClick:ge,class:"w-full px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer"}," Select All ("+n(w.value.length)+") ",1)])]),l("div",Qe,[l("p",Xe,[l("span",Ze,n(A.value),1),e[40]||(e[40]=I(" of ",-1)),l("span",et,n(w.value.length),1),e[41]||(e[41]=I(" rows selected ",-1)),w.value.length<h.value.length?(s(),r("span",tt," (filtered from "+n(h.value.length)+" total) ",1)):x("",!0)])]),l("div",lt,[l("table",ot,[l("thead",rt,[l("tr",null,[l("th",st,[l("input",{type:"checkbox",checked:ve.value,onChange:fe,class:"rounded"},null,40,at)]),(s(!0),r(v,null,p(d.value,t=>(s(),r("th",{key:t,class:"px-3 py-2 text-left border-b font-medium text-gray-700"},n(t),1))),128))])]),l("tbody",null,[(s(!0),r(v,null,p(w.value,(t,u)=>(s(),r("tr",{key:u,class:oe([{"bg-blue-50":t.selected},"hover:bg-gray-50"])},[l("td",nt,[m(l("input",{type:"checkbox","onUpdate:modelValue":i=>t.selected=i,class:"rounded"},null,8,ut),[[Ue,t.selected]])]),(s(!0),r(v,null,p(d.value,i=>(s(),r("td",{key:i,class:"px-3 py-2 border-b text-gray-700"},n(t.data[i]||"-"),1))),128))],2))),128))])])]),l("div",dt,[l("button",{onClick:e[7]||(e[7]=t=>b.value=2),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Back "),l("button",{onClick:xe,disabled:A.value===0,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed"}," Create Order from Selected ("+n(A.value)+") ",9,it)])])):x("",!0),b.value===4?(s(),r("div",mt,[e[63]||(e[63]=l("div",null,[l("h4",{class:"text-md font-medium text-gray-900 mb-2"},"Map Excel Columns to School Fields"),l("p",{class:"text-sm text-gray-500 mb-4"}," Select which Excel columns correspond to each school field. Required fields are marked with *. ")],-1)),l("div",vt,[l("div",null,[e[43]||(e[43]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," School Name * ",-1)),m(l("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>a.value.name=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[42]||(e[42]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,pt))),128))],512),[[y,a.value.name]])]),l("div",null,[e[45]||(e[45]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," School Address * ",-1)),m(l("select",{"onUpdate:modelValue":e[9]||(e[9]=t=>a.value.address=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[44]||(e[44]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,ct))),128))],512),[[y,a.value.address]])]),l("div",null,[e[47]||(e[47]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," City * ",-1)),m(l("select",{"onUpdate:modelValue":e[10]||(e[10]=t=>a.value.city=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[46]||(e[46]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,yt))),128))],512),[[y,a.value.city]])]),l("div",null,[e[49]||(e[49]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," State / Region ",-1)),m(l("select",{"onUpdate:modelValue":e[11]||(e[11]=t=>a.value.state=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[48]||(e[48]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,bt))),128))],512),[[y,a.value.state]])]),l("div",null,[e[51]||(e[51]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Contact Person Name ",-1)),m(l("select",{"onUpdate:modelValue":e[12]||(e[12]=t=>a.value.contact_name=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[50]||(e[50]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,gt))),128))],512),[[y,a.value.contact_name]])]),l("div",null,[e[53]||(e[53]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," CP Number (Contact Phone) ",-1)),m(l("select",{"onUpdate:modelValue":e[13]||(e[13]=t=>a.value.contact_phone=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[52]||(e[52]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,ft))),128))],512),[[y,a.value.contact_phone]])]),l("div",null,[e[55]||(e[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," CP Email (Contact Email) ",-1)),m(l("select",{"onUpdate:modelValue":e[14]||(e[14]=t=>a.value.contact_email=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[54]||(e[54]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,xt))),128))],512),[[y,a.value.contact_email]])]),l("div",null,[e[57]||(e[57]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Final Number of Kits ",-1)),m(l("select",{"onUpdate:modelValue":e[15]||(e[15]=t=>a.value.kits_count=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[56]||(e[56]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,kt))),128))],512),[[y,a.value.kits_count]])]),l("div",null,[e[59]||(e[59]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Medium (City Type) ",-1)),m(l("select",{"onUpdate:modelValue":e[16]||(e[16]=t=>a.value.city_type=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[58]||(e[58]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,wt))),128))],512),[[y,a.value.city_type]]),e[60]||(e[60]=l("p",{class:"text-xs text-gray-500 mt-1"}," Expected values: rural, urban big, urban small, urban ",-1))]),l("div",null,[e[62]||(e[62]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"}," Protocol Number ",-1)),m(l("select",{"onUpdate:modelValue":e[17]||(e[17]=t=>a.value.protocol_number=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[e[61]||(e[61]=l("option",{value:""},"-- Select Column --",-1)),(s(!0),r(v,null,p(d.value,t=>(s(),r("option",{key:t,value:t},n(t),9,Ct))),128))],512),[[y,a.value.protocol_number]])])]),l("div",_t,[l("button",{onClick:e[18]||(e[18]=t=>b.value=3),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Back "),l("button",{onClick:ke,disabled:!X.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed"}," Next: Create Order ",8,St)])])):x("",!0),b.value===5?(s(),r("div",ht,[l("div",null,[e[64]||(e[64]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order Name *",-1)),m(l("input",{"onUpdate:modelValue":e[19]||(e[19]=t=>F.value.name=t),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., Order 3"},null,512),[[K,F.value.name]])]),l("div",Ot,[l("p",Nt,[e[65]||(e[65]=I(" Ready to create order with ",-1)),l("span",Ut,n(A.value),1),e[66]||(e[66]=I(" schools ",-1))])]),l("div",Vt,[l("button",{onClick:e[20]||(e[20]=t=>b.value=4),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Back "),l("button",{onClick:we,disabled:!F.value.name||H.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed"},n(H.value?"Creating...":"Create Order"),9,Dt)])])):x("",!0)])):x("",!0),re.value?(s(),r("div",Et," Loading orders... ")):Y.value.length===0?(s(),r("div",$t,[e[67]||(e[67]=l("p",{class:"text-gray-500 mb-4"},"No orders yet. Create your first order to get started.",-1)),l("button",{onClick:e[21]||(e[21]=t=>U.value=!0),class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer"}," Create Order ")])):(s(),r("div",Ft,[(s(!0),r(v,null,p(Y.value,t=>(s(),r("div",{key:t.id,class:"bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow cursor-pointer",onClick:u=>G(t.id)},[l("div",Mt,[l("h3",jt,n(t.name),1),l("span",{class:oe(["px-2 py-1 text-xs font-medium rounded",{"bg-gray-100 text-gray-800":t.status==="draft","bg-blue-100 text-blue-800":t.status==="planned","bg-yellow-100 text-yellow-800":t.status==="in-progress","bg-green-100 text-green-800":t.status==="completed","bg-red-100 text-red-800":t.status==="cancelled"}])},n(t.status),3)]),l("div",Rt,[t.delivery_month||t.delivery_year?(s(),r("div",Pt,[e[68]||(e[68]=l("span",{class:"font-medium mr-2"},"Delivery:",-1)),l("span",null,n(se(t.delivery_month,t.delivery_year)),1)])):x("",!0),l("div",Tt,[l("span",null,n(t.school_count||0)+" Schools",1),l("span",null,n(t.total_kits||0)+" Kits",1)])]),l("div",Lt,[l("button",{onClick:T(u=>G(t.id),["stop"]),class:"flex-1 px-3 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer text-sm"}," View ",8,qt),l("button",{onClick:T(u=>ue(t.id),["stop"]),class:"px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 cursor-pointer text-sm"}," Export ",8,Bt),l("button",{onClick:T(u=>ne(t),["stop"]),class:"px-3 py-2 bg-red-100 text-red-700 rounded-md hover:bg-red-200 cursor-pointer text-sm"}," Delete ",8,Jt)])],8,At))),128))])),U.value?(s(),r("div",{key:4,class:"fixed inset-0 bg-gray-600/75 overflow-y-auto h-full w-full z-50",onClick:e[29]||(e[29]=T(t=>U.value=!1,["self"]))},[l("div",Ht,[l("div",It,[e[69]||(e[69]=l("h3",{class:"text-lg font-medium text-gray-900"},"Create New Order",-1)),l("button",{onClick:e[22]||(e[22]=t=>U.value=!1),class:"text-gray-400 hover:text-gray-600 cursor-pointer"}," ✕ ")]),l("form",{onSubmit:T(ae,["prevent"]),class:"space-y-4"},[l("div",null,[e[70]||(e[70]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Order Name *",-1)),m(l("input",{"onUpdate:modelValue":e[23]||(e[23]=t=>f.value.name=t),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., Order 3"},null,512),[[K,f.value.name]])]),l("div",Kt,[l("div",null,[e[72]||(e[72]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Month",-1)),m(l("select",{"onUpdate:modelValue":e[24]||(e[24]=t=>f.value.delivery_month=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...e[71]||(e[71]=[l("option",{value:null},"-- Select Month --",-1),le('<option value="January">January</option><option value="February">February</option><option value="March">March</option><option value="April">April</option><option value="May">May</option><option value="June">June</option><option value="July">July</option><option value="August">August</option><option value="September">September</option><option value="October">October</option><option value="November">November</option><option value="December">December</option>',12)])],512),[[y,f.value.delivery_month]])]),l("div",null,[e[73]||(e[73]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Year",-1)),m(l("input",{"onUpdate:modelValue":e[25]||(e[25]=t=>f.value.delivery_year=t),type:"number",min:"2020",max:"2100",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"e.g., 2024"},null,512),[[K,f.value.delivery_year,void 0,{number:!0}]])])]),l("div",null,[e[75]||(e[75]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),m(l("select",{"onUpdate:modelValue":e[26]||(e[26]=t=>f.value.status=t),class:"w-full border border-gray-300 rounded-md px-3 py-2"},[...e[74]||(e[74]=[le('<option value="draft">Draft</option><option value="planned">Planned</option><option value="in-progress">In Progress</option><option value="completed">Completed</option><option value="cancelled">Cancelled</option>',5)])],512),[[y,f.value.status]])]),l("div",null,[e[76]||(e[76]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Notes",-1)),m(l("textarea",{"onUpdate:modelValue":e[27]||(e[27]=t=>f.value.notes=t),rows:"3",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Additional notes..."},null,512),[[K,f.value.notes]])]),l("div",zt,[l("button",{type:"button",onClick:e[28]||(e[28]=t=>U.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Cancel "),l("button",{type:"submit",disabled:L.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 cursor-pointer disabled:bg-gray-400 disabled:cursor-not-allowed"},n(L.value?"Creating...":"Create Order"),9,Wt)])],32)])])):x("",!0)]))}});export{el as default};
