import{d as we,r as d,o as _e,w as ie,i as ke,c as a,a as e,f as p,F as D,b as R,s as x,t as r,j as k,v as T,D as de,y as ue,l as Ce,e as y,n as P,h as l}from"./index-D6DdudHB.js";import{u as Ae}from"./groups-BJ29z54-.js";import{u as Ge}from"./whatsapp-DcciMMEC.js";import{f as Se}from"./phoneValidator-nfOHmQze.js";const $e={class:"px-4 py-6 sm:px-0"},Me={class:"mb-6 flex justify-between items-center"},We={key:0,class:"text-center py-12"},Ee={key:1,class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},Ne=["onClick"],Ve={class:"p-6"},je={class:"flex items-start justify-between mb-4"},ze={class:"flex-1"},Be={class:"text-xl font-semibold text-gray-900"},Ie={key:0,class:"text-sm text-gray-500 mt-1"},Le={class:"flex gap-2 ml-4"},Ue=["onClick"],He=["onClick"],De={class:"flex items-center justify-between pt-4 border-t border-gray-200"},Re={class:"flex items-center"},Te={class:"text-2xl font-bold text-blue-600"},Pe=["onClick"],Fe={key:0,class:"col-span-full text-center py-12"},Oe={class:"mt-6"},qe={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Je={class:"mt-3"},Ke={class:"text-lg font-medium text-gray-900 mb-4"},Qe={class:"space-y-4"},Xe={class:"flex justify-end gap-2 mt-6"},Ye=["disabled"],Ze={class:"relative top-10 mx-auto p-5 border w-full max-w-[80%] shadow-lg rounded-md bg-white"},et={class:"mt-3"},tt={class:"flex items-center justify-between mb-6"},st={class:"text-2xl font-bold text-gray-900"},ot={key:0,class:"text-sm text-gray-500 mt-1"},at={class:"flex gap-2 mb-6"},lt=["disabled"],nt=["disabled"],rt=["disabled"],it={class:"text-lg font-semibold text-gray-900 mb-4"},dt={key:0,class:"text-center py-8"},ut={key:1,class:"text-center py-8 text-gray-500"},pt={key:2,class:"bg-white border border-gray-200 rounded-lg overflow-hidden"},ct={class:"min-w-full divide-y divide-gray-200"},vt={class:"bg-white divide-y divide-gray-200"},xt={class:"px-6 py-4 text-sm font-medium text-gray-900 max-w-xs"},gt={class:"flex items-center gap-1"},mt=["title"],yt=["onClick"],ht={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},ft={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},bt={class:"px-6 py-4 text-sm text-gray-500 max-w-xs"},wt={key:0,class:"flex items-center gap-1"},_t=["title"],kt=["onClick"],Ct={key:1,class:"text-gray-400"},At={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},Gt={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},St={key:1,class:"text-gray-400"},$t={class:"px-6 py-4 whitespace-nowrap text-sm"},Mt={key:0,class:"text-gray-400"},Wt={key:1,class:"flex items-center gap-2"},Et={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Nt={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"},Vt={key:2,class:"text-xs text-blue-600",title:"In your WhatsApp contacts"},jt={class:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium"},zt=["onClick"],Bt={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},It={class:"mt-3"},Lt={class:"text-sm text-gray-500 mb-4"},Ut={class:"mb-4"},Ht={class:"space-y-2"},Dt={class:"flex items-center"},Rt={class:"flex items-center"},Tt={key:0,class:"mb-4"},Pt=["placeholder"],Ft={class:"mt-1 text-xs text-gray-500"},Ot={key:1,class:"mb-4"},qt=["disabled"],Jt=["value"],Kt={key:1,class:"mt-2 text-sm text-gray-500"},Qt={class:"flex justify-end gap-2 mt-6"},Xt=["disabled"],Yt={class:"relative top-10 mx-auto p-5 border w-full max-w-3xl shadow-lg rounded-md bg-white"},Zt={class:"mt-3"},es={class:"text-lg font-medium text-gray-900 mb-4"},ts={class:"mb-4"},ss={class:"max-h-96 overflow-y-auto border border-gray-200 rounded-lg"},os={key:0,class:"text-center py-8"},as={key:1,class:"text-center py-8 text-gray-500"},ls={key:2,class:"min-w-full divide-y divide-gray-200"},ns={class:"bg-gray-50 sticky top-0"},rs={class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},is=["checked"],ds={class:"bg-white divide-y divide-gray-200"},us=["onClick"],ps={class:"px-6 py-4 whitespace-nowrap"},cs=["checked","onChange"],vs={class:"px-6 py-4 text-sm font-medium text-gray-900 max-w-xs"},xs={class:"flex items-center gap-1"},gs=["title"],ms=["onClick"],ys={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},hs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},fs={class:"px-6 py-4 text-sm text-gray-500 max-w-xs"},bs={key:0,class:"flex items-center gap-1"},ws=["title"],_s=["onClick"],ks={key:1,class:"text-gray-400"},Cs={class:"px-6 py-4 whitespace-nowrap text-sm text-gray-500"},As={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Gs={key:1,class:"text-gray-400"},Ss={class:"px-6 py-4 whitespace-nowrap text-sm"},$s={key:0,class:"text-gray-400"},Ms={key:1,class:"flex items-center gap-2"},Ws={key:0,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800"},Es={key:1,class:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800"},Ns={key:2,class:"text-xs text-blue-600",title:"In your WhatsApp contacts"},Vs={class:"flex justify-end gap-2 mt-6"},js=["disabled"],Hs=we({__name:"Groups",setup(zs){const S=Ae(),$=Ge(),F=d(!1),O=d([]),E=d(!1),C=d(!1),N=d(!1),b=d(!1),n=d(null),V=d(!1),g=d({name:"",description:""}),c=d([]),q=d(!1),w=d([]),J=d(!1),j=d(""),v=d([]),z=d(!1),A=d(!1),m=d("new"),B=d(""),_=d(null),K=d([]),M=d(!1),I=d(!1),L=d(!1),U=d(!1),Z=d(null),h=d({}),f=d({});_e(async()=>{await W(),await $.fetchStatus()});async function W(){var o,s;F.value=!0;try{await S.fetchGroups(),O.value=S.groups}catch(t){console.error("Error fetching groups:",t),alert("Error loading groups: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{F.value=!1}}function ee(o){n.value=o,N.value=!0,H(o.id)}function Q(){N.value=!1,n.value=null,c.value=[]}function te(o){n.value=o,g.value={name:o.name,description:o.description||""},C.value=!0,N.value=!1}function X(){E.value=!1,C.value=!1,g.value={name:"",description:""},n.value=null}async function pe(){var o,s;if(!g.value.name.trim()){alert("Group name is required");return}V.value=!0;try{C.value&&n.value?await S.updateGroup(n.value.id,{name:g.value.name.trim(),description:g.value.description.trim()||null}):await S.createGroup(g.value.name.trim(),g.value.description.trim()||void 0),await W(),X()}catch(t){alert("Error saving group: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{V.value=!1}}async function ce(o){var s,t,i;if(confirm(`Are you sure you want to delete "${o.name}"?`))try{await S.deleteGroup(o.id),await W(),((s=n.value)==null?void 0:s.id)===o.id&&Q()}catch(u){alert("Error deleting group: "+(((i=(t=u.response)==null?void 0:t.data)==null?void 0:i.error)||u.message))}}async function H(o){var s,t;q.value=!0;try{const i=await y.get(`/api/groups/${o}/contacts`);c.value=i.data.contacts}catch(i){console.error("Error fetching group contacts:",i),alert("Error loading contacts: "+(((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.error)||i.message))}finally{q.value=!1}}async function se(){if(n.value){J.value=!0;try{const o=await y.get(`/api/groups/${n.value.id}/contacts/available`,{params:{search:j.value}});w.value=o.data.contacts}catch(o){console.error("Error searching contacts:",o)}finally{J.value=!1}}}function oe(o){const s=v.value.indexOf(o);s>-1?v.value.splice(s,1):v.value.push(o)}function ve(o){o.target.checked?v.value=w.value.map(t=>t.id):v.value=[]}async function xe(){var o,s;if(!(!n.value||v.value.length===0)){z.value=!0;try{await y.post(`/api/groups/${n.value.id}/contacts`,{contactIds:v.value}),await H(n.value.id),await W(),b.value=!1,v.value=[],j.value="",w.value=[]}catch(t){alert("Error adding contacts: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{z.value=!1}}}async function ge(o){var s,t;if(n.value&&confirm("Remove this contact from the group?"))try{await y.delete(`/api/groups/${n.value.id}/contacts`,{data:{contactIds:[o]}}),await H(n.value.id),await W()}catch(i){alert("Error removing contact: "+(((t=(s=i.response)==null?void 0:s.data)==null?void 0:t.error)||i.message))}}function ae(o){return Se(o)}function le(o){h.value[o]=!h.value[o]}function ne(o){f.value[o]=!f.value[o]}async function me(){b.value&&n.value&&await se()}ie(b,o=>{o&&me()}),ie(A,o=>{o&&(Y(),m.value="new",B.value="",_.value=null)});const re=ke(()=>c.value.length===0?!1:m.value==="new"?!0:_.value!==null);async function Y(){var o,s;M.value=!0;try{const t=await y.get("/api/whatsapp/groups");K.value=t.data.groups||[]}catch(t){console.error("Error loading WhatsApp groups:",t),alert("Error loading WhatsApp groups: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{M.value=!1}}async function ye(){var o,s;if(n.value){if(c.value.length===0){alert("No contacts in this group to export");return}L.value=!0;try{const t=await y.get("/api/contacts/export",{params:{groupId:n.value.id},responseType:"blob"}),i=window.URL.createObjectURL(new Blob([t.data])),u=document.createElement("a");u.href=i;const G=n.value.name.replace(/[^a-z0-9]/gi,"-").toLowerCase();u.setAttribute("download",`contacts-group-${G}-${new Date().toISOString().split("T")[0]}.csv`),document.body.appendChild(u),u.click(),u.remove(),window.URL.revokeObjectURL(i)}catch(t){console.error("Error exporting group contacts:",t),alert("Error exporting contacts: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{L.value=!1}}}async function he(){var o,s;if(!(!n.value||c.value.length===0)){if(!$.connected){alert("WhatsApp is not connected. Please wait for the connection to be established.");return}U.value=!0,Z.value=null;try{const t=c.value.map(G=>G.id),i=await y.post("/api/whatsapp/validate-contacts",{contactIds:t});Z.value=i.data,await H(n.value.id);const{summary:u}=i.data;alert(`Validation complete!

Total: ${u.total}
Valid: ${u.valid}
Invalid: ${u.invalid}
In Contacts: ${u.inContacts}
Not in Contacts: ${u.notInContacts}`)}catch(t){console.error("Error validating contacts:",t),alert("Error validating contacts: "+(((s=(o=t.response)==null?void 0:o.data)==null?void 0:s.error)||t.message))}finally{U.value=!1}}}async function fe(){var s,t,i;if(!re.value||!n.value)return;if(!$.connected){alert("WhatsApp is not connected. Please wait for the connection to be established.");return}if(c.value.length===0){alert("No contacts to sync");return}const o=c.value.map(u=>u.phone).filter(u=>u);if(o.length===0){alert("No valid phone numbers found in this group");return}I.value=!0;try{if(m.value==="new"){const u=B.value.trim()||n.value.name,G=await y.post("/api/whatsapp/groups",{name:u,participantPhones:o});alert(`Successfully created WhatsApp group "${u}" and added ${o.length} contact(s)!`)}else{if(!_.value){alert("Please select a WhatsApp group");return}const u=await y.post(`/api/whatsapp/groups/${_.value}/participants`,{participantPhones:o}),G=((s=K.value.find(be=>be.id===_.value))==null?void 0:s.name)||"group";alert(`Successfully added ${o.length} contact(s) to WhatsApp group "${G}"!`)}await Y(),A.value=!1}catch(u){alert("Error syncing to WhatsApp group: "+(((i=(t=u.response)==null?void 0:t.data)==null?void 0:i.error)||u.message))}finally{I.value=!1}}return(o,s)=>(l(),a("div",$e,[e("div",Me,[s[17]||(s[17]=e("div",null,[e("h2",{class:"text-3xl font-bold text-gray-900"},"Groups"),e("p",{class:"mt-1 text-sm text-gray-500"},"Manage your contact groups")],-1)),e("button",{onClick:s[0]||(s[0]=t=>E.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer"}," + New Group ")]),F.value?(l(),a("div",We,[...s[18]||(s[18]=[e("div",{class:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1),e("p",{class:"mt-2 text-gray-600"},"Loading groups...",-1)])])):(l(),a("div",Ee,[(l(!0),a(D,null,R(O.value,t=>(l(),a("div",{key:t.id,class:"bg-white rounded-lg shadow hover:shadow-lg transition-shadow cursor-pointer",onClick:i=>ee(t)},[e("div",Ve,[e("div",je,[e("div",ze,[e("h3",Be,r(t.name),1),t.description?(l(),a("p",Ie,r(t.description),1)):p("",!0)]),e("div",Le,[e("button",{onClick:x(i=>te(t),["stop"]),class:"p-2 text-blue-600 hover:bg-blue-50 rounded-md cursor-pointer",title:"Edit Group"},[...s[19]||(s[19]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})],-1)])],8,Ue),e("button",{onClick:x(i=>ce(t),["stop"]),class:"p-2 text-red-600 hover:bg-red-50 rounded-md cursor-pointer",title:"Delete Group"},[...s[20]||(s[20]=[e("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)])],8,He)])]),e("div",De,[e("div",Re,[s[21]||(s[21]=e("svg",{class:"w-5 h-5 text-gray-400 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),e("span",Te,r(t.contactCount||0),1),s[22]||(s[22]=e("span",{class:"text-sm text-gray-500 ml-1"},"contacts",-1))]),e("button",{onClick:x(i=>ee(t),["stop"]),class:"text-blue-600 hover:text-blue-700 text-sm font-medium cursor-pointer"}," View Details â†’ ",8,Pe)])])],8,Ne))),128)),O.value.length===0?(l(),a("div",Fe,[s[23]||(s[23]=e("svg",{class:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})],-1)),s[24]||(s[24]=e("h3",{class:"mt-2 text-sm font-medium text-gray-900"},"No groups",-1)),s[25]||(s[25]=e("p",{class:"mt-1 text-sm text-gray-500"},"Get started by creating a new group.",-1)),e("div",Oe,[e("button",{onClick:s[1]||(s[1]=t=>E.value=!0),class:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 cursor-pointer"}," + New Group ")])])):p("",!0)])),E.value||C.value?(l(),a("div",{key:2,class:"fixed inset-0 bg-gray-600/75 overflow-y-auto h-full w-full z-50",onClick:x(X,["self"])},[e("div",qe,[e("div",Je,[e("h3",Ke,r(C.value?"Edit Group":"New Group"),1),e("form",{onSubmit:x(pe,["prevent"])},[e("div",Qe,[e("div",null,[s[26]||(s[26]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Name *",-1)),k(e("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>g.value.name=t),type:"text",required:"",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Group name"},null,512),[[T,g.value.name]])]),e("div",null,[s[27]||(s[27]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),k(e("textarea",{"onUpdate:modelValue":s[3]||(s[3]=t=>g.value.description=t),rows:"3",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"Group description (optional)"},null,512),[[T,g.value.description]])])]),e("div",Xe,[e("button",{type:"button",onClick:X,class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Cancel "),e("button",{type:"submit",disabled:V.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer"},r(V.value?"Saving...":C.value?"Update":"Create"),9,Ye)])],32)])])])):p("",!0),N.value&&n.value?(l(),a("div",{key:3,class:"fixed inset-0 bg-gray-600/75 overflow-y-auto h-full w-full z-50",onClick:x(Q,["self"])},[e("div",Ze,[e("div",et,[e("div",tt,[e("div",null,[e("h3",st,r(n.value.name),1),n.value.description?(l(),a("p",ot,r(n.value.description),1)):p("",!0)]),e("button",{onClick:Q,class:"text-gray-400 hover:text-gray-600 cursor-pointer"},[...s[28]||(s[28]=[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)])])]),e("div",at,[e("button",{onClick:s[4]||(s[4]=t=>b.value=!0),class:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 cursor-pointer"}," + Add Contacts "),e("button",{onClick:s[5]||(s[5]=t=>A.value=!0),disabled:!de($).connected||c.value.length===0,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer",title:"Sync all contacts from this group to a WhatsApp group"}," ðŸ“± Sync to WhatsApp ",8,lt),e("button",{onClick:he,disabled:!de($).connected||c.value.length===0||U.value,class:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer",title:"Validate WhatsApp accounts for all contacts in this group"},r(U.value?"Validating...":"âœ“ Validate WhatsApp"),9,nt),e("button",{onClick:ye,disabled:L.value||c.value.length===0,class:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer",title:"Export contacts from this group to Gmail CSV format"},r(L.value?"Exporting...":"ðŸ“§ Export to Gmail"),9,rt),e("button",{onClick:s[6]||(s[6]=t=>te(n.value)),class:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700 cursor-pointer"}," Edit Group ")]),e("div",null,[e("h4",it," Contacts ("+r(c.value.length)+") ",1),q.value?(l(),a("div",dt,[...s[29]||(s[29]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):c.value.length===0?(l(),a("div",ut," No contacts in this group ")):(l(),a("div",pt,[e("table",ct,[s[30]||(s[30]=e("thead",{class:"bg-gray-50"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Name "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Phone "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Email "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Business "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," Messages "),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"}," WAStatus "),e("th",{class:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider"}," Actions ")])],-1)),e("tbody",vt,[(l(!0),a(D,null,R(c.value,t=>(l(),a("tr",{key:t.id},[e("td",xt,[e("div",gt,[e("span",{class:P({truncate:!h.value[t.id]}),title:h.value[t.id]?"":t.name},r(t.name),11,mt),t.name&&t.name.length>20?(l(),a("button",{key:0,onClick:x(i=>le(t.id),["stop"]),class:"text-blue-600 hover:text-blue-800 text-xs cursor-pointer flex-shrink-0"},r(h.value[t.id]?"Hide":"Show"),9,yt)):p("",!0)])]),e("td",ht,r(ae(t.phone)),1),e("td",ft,r(t.email||"-"),1),e("td",bt,[t.business?(l(),a("div",wt,[e("span",{class:P({truncate:!f.value[t.id]}),title:f.value[t.id]?"":t.business},r(t.business),11,_t),t.business.length>20?(l(),a("button",{key:0,onClick:x(i=>ne(t.id),["stop"]),class:"text-blue-600 hover:text-blue-800 text-xs cursor-pointer flex-shrink-0"},r(f.value[t.id]?"Hide":"Show"),9,kt)):p("",!0)])):(l(),a("span",Ct,"-"))]),e("td",At,[t.sent_count&&t.sent_count>0?(l(),a("span",Gt," Sent ("+r(t.sent_count)+") ",1)):(l(),a("span",St,"-"))]),e("td",$t,[t.whatsapp_valid===null||t.whatsapp_valid===void 0?(l(),a("div",Mt," Not checked ")):(l(),a("div",Wt,[t.whatsapp_valid===1?(l(),a("span",Et," âœ“ Valid ")):(l(),a("span",Nt," âœ— Invalid ")),t.whatsapp_in_contacts===1?(l(),a("span",Vt," ðŸ“± ")):p("",!0)]))]),e("td",jt,[e("button",{onClick:i=>ge(t.id),class:"text-red-600 hover:text-red-900 cursor-pointer"}," Remove ",8,zt)])]))),128))])])]))])])])])):p("",!0),A.value&&n.value?(l(),a("div",{key:4,class:"fixed inset-0 bg-gray-600/75 overflow-y-auto h-full w-full z-50",onClick:s[12]||(s[12]=x(t=>A.value=!1,["self"]))},[e("div",Bt,[e("div",It,[s[37]||(s[37]=e("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Sync to WhatsApp Group",-1)),e("p",Lt," Sync all "+r(c.value.length)+' contact(s) from "'+r(n.value.name)+'" to a WhatsApp group ',1),e("div",Ut,[s[33]||(s[33]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Action *",-1)),e("div",Ht,[e("label",Dt,[k(e("input",{type:"radio","onUpdate:modelValue":s[7]||(s[7]=t=>m.value=t),value:"new",class:"mr-2"},null,512),[[ue,m.value]]),s[31]||(s[31]=e("span",null,"Create new WhatsApp group",-1))]),e("label",Rt,[k(e("input",{type:"radio","onUpdate:modelValue":s[8]||(s[8]=t=>m.value=t),value:"existing",class:"mr-2"},null,512),[[ue,m.value]]),s[32]||(s[32]=e("span",null,"Add to existing WhatsApp group",-1))])])]),m.value==="new"?(l(),a("div",Tt,[s[34]||(s[34]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"WhatsApp Group Name *",-1)),k(e("input",{"onUpdate:modelValue":s[9]||(s[9]=t=>B.value=t),type:"text",class:"w-full border border-gray-300 rounded-md px-3 py-2",placeholder:n.value.name},null,8,Pt),[[T,B.value]]),e("p",Ft,'Leave empty to use "'+r(n.value.name)+'"',1)])):p("",!0),m.value==="existing"?(l(),a("div",Ot,[s[36]||(s[36]=e("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Select WhatsApp Group *",-1)),k(e("select",{"onUpdate:modelValue":s[10]||(s[10]=t=>_.value=t),class:"w-full border border-gray-300 rounded-md px-3 py-2",disabled:M.value},[s[35]||(s[35]=e("option",{value:null},"-- Select Group --",-1)),(l(!0),a(D,null,R(K.value,t=>(l(),a("option",{key:t.id,value:t.id},r(t.name)+" ("+r(t.participantCount)+" participants) ",9,Jt))),128))],8,qt),[[Ce,_.value]]),M.value?p("",!0):(l(),a("button",{key:0,onClick:Y,class:"mt-2 text-sm text-blue-600 hover:text-blue-800 cursor-pointer"}," Refresh Groups ")),M.value?(l(),a("p",Kt,"Loading groups...")):p("",!0)])):p("",!0),e("div",Qt,[e("button",{type:"button",onClick:s[11]||(s[11]=t=>A.value=!1),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Cancel "),e("button",{onClick:fe,disabled:!re.value||I.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer"},r(I.value?"Syncing...":m.value==="new"?"Create & Sync":"Sync"),9,Xt)])])])])):p("",!0),b.value&&n.value?(l(),a("div",{key:5,class:"fixed inset-0 bg-gray-600/75 overflow-y-auto h-full w-full z-50",onClick:s[16]||(s[16]=x(t=>b.value=!1,["self"]))},[e("div",Yt,[e("div",Zt,[e("h3",es," Add Contacts to "+r(n.value.name),1),e("div",ts,[k(e("input",{"onUpdate:modelValue":s[13]||(s[13]=t=>j.value=t),type:"text",placeholder:"Search contacts...",class:"w-full border border-gray-300 rounded-md px-3 py-2",onInput:se},null,544),[[T,j.value]])]),e("div",ss,[J.value?(l(),a("div",os,[...s[38]||(s[38]=[e("div",{class:"inline-block animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"},null,-1)])])):w.value.length===0?(l(),a("div",as," No available contacts ")):(l(),a("table",ls,[e("thead",ns,[e("tr",null,[e("th",rs,[e("input",{type:"checkbox",checked:v.value.length===w.value.length&&w.value.length>0,onChange:ve,class:"rounded border-gray-300 cursor-pointer"},null,40,is)]),s[39]||(s[39]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Name",-1)),s[40]||(s[40]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Phone",-1)),s[41]||(s[41]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Email",-1)),s[42]||(s[42]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Business",-1)),s[43]||(s[43]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Messages",-1)),s[44]||(s[44]=e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"WAStatus",-1))])]),e("tbody",ds,[(l(!0),a(D,null,R(w.value,t=>(l(),a("tr",{key:t.id,class:"hover:bg-gray-50 cursor-pointer",onClick:i=>oe(t.id)},[e("td",ps,[e("input",{type:"checkbox",checked:v.value.includes(t.id),onChange:i=>oe(t.id),onClick:s[14]||(s[14]=x(()=>{},["stop"])),class:"rounded border-gray-300 cursor-pointer"},null,40,cs)]),e("td",vs,[e("div",xs,[e("span",{class:P({truncate:!h.value[t.id]}),title:h.value[t.id]?"":t.name},r(t.name),11,gs),t.name&&t.name.length>20?(l(),a("button",{key:0,onClick:x(i=>le(t.id),["stop"]),class:"text-blue-600 hover:text-blue-800 text-xs cursor-pointer flex-shrink-0"},r(h.value[t.id]?"Hide":"Show"),9,ms)):p("",!0)])]),e("td",ys,r(ae(t.phone)),1),e("td",hs,r(t.email||"-"),1),e("td",fs,[t.business?(l(),a("div",bs,[e("span",{class:P({truncate:!f.value[t.id]}),title:f.value[t.id]?"":t.business},r(t.business),11,ws),t.business.length>20?(l(),a("button",{key:0,onClick:x(i=>ne(t.id),["stop"]),class:"text-blue-600 hover:text-blue-800 text-xs cursor-pointer flex-shrink-0"},r(f.value[t.id]?"Hide":"Show"),9,_s)):p("",!0)])):(l(),a("span",ks,"-"))]),e("td",Cs,[t.sent_count&&t.sent_count>0?(l(),a("span",As," Sent ("+r(t.sent_count)+") ",1)):(l(),a("span",Gs,"-"))]),e("td",Ss,[t.whatsapp_valid===null||t.whatsapp_valid===void 0?(l(),a("div",$s," Not checked ")):(l(),a("div",Ms,[t.whatsapp_valid===1?(l(),a("span",Ws," âœ“ Valid ")):(l(),a("span",Es," âœ— Invalid ")),t.whatsapp_in_contacts===1?(l(),a("span",Ns," ðŸ“± ")):p("",!0)]))])],8,us))),128))])]))]),e("div",Vs,[e("button",{onClick:s[15]||(s[15]=t=>{b.value=!1,v.value=[]}),class:"px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 cursor-pointer"}," Cancel "),e("button",{onClick:xe,disabled:v.value.length===0||z.value,class:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:bg-gray-400 disabled:cursor-not-allowed cursor-pointer"},r(z.value?"Adding...":`Add ${v.value.length} Contact(s)`),9,js)])])])])):p("",!0)]))}});export{Hs as default};
