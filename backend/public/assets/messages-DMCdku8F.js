import{u as E,r as i,e as f}from"./index-D6DdudHB.js";const m="/api",S=E("messages",()=>{const g=i([]),n=i(!1),l=i(null),p=i(0),y=i("Hello {GivenName}, this is a message from me. Please reply when you can.");async function d(s,t,o,r=100,u=0){var c,e;n.value=!0,l.value=null;try{const a={limit:r,offset:u};s&&(a.contactId=s),t&&(a.groupId=t),o&&(a.status=o);const h=await f.get(`${m}/messages/history`,{params:a});g.value=h.data.messages,p.value=h.data.total}catch(a){l.value=((e=(c=a.response)==null?void 0:c.data)==null?void 0:e.error)||a.message,console.error("Error fetching message history:",a)}finally{n.value=!1}}async function v(s,t,o,r=1e3){var u,c;n.value=!0,l.value=null;try{const e={template:o,delay:r};return s.length>0?e.contactIds=s:t&&(e.groupId=t),(await f.post(`${m}/messages/send`,e)).data}catch(e){throw l.value=((c=(u=e.response)==null?void 0:u.data)==null?void 0:c.error)||e.message,e}finally{n.value=!1}}async function w(s){var t,o;try{const r=await f.post(`${m}/messages/retry/${s}`);return await d(),r.data}catch(r){throw new Error(((o=(t=r.response)==null?void 0:t.data)==null?void 0:o.error)||r.message)}}function $(s){y.value=s}return{messages:g,loading:n,error:l,total:p,template:y,fetchHistory:d,sendMessages:v,retryMessage:w,setTemplate:$}});export{S as u};
